Knit
====

*DECOMMISSIONED*

*Knit has been decommissioned and its use is no longer
 recommended. The reasons for this are explained below.*

The basic idea behind Knit was to provide a local web-server that
served static files from local sources and proxied to a remote
web-server for anything else. Static files for web-apps are often
generated from other sources -- LESS that generates CSS, CoffeeScript
that generates JavaScript, or templates that generate HTML. The local
web-server would ensure these were regenerated from the latest sources
whenever the resulting resource was requested.

This regeneration of resources by the web-server has advantages
over the traditional file-watching approach:

* Generation starts when the file-system detects a change to one of
  the source files, but it may not finish before the resulting file is
  requested through a page reload by the developer. Thus, it is
  uncertain whether the change had no effect or did not yet load,
  leaving developers reloading the page several times after a save.

* File watching depends on differents technologies and tools between
  operating systems. All source files that could affect the result
  must be watched and this list must be kept up to date.

* Loading files straight from disk without a local web-server makes
  testing apps against remote APIs impossible (same origin policy). It
  also means that headers and URLs can't be customised to reflect
  their deployed behaviour.

This basic idea is still followed by Knit's successor, Knot (to be
published).

What was the reason then for decommissioning Knit? JavaScript. Knit
was written in JavaScript because most development tools where written
as node.js libraries and it was trivial to create a proxy server in
node.js. This JavaScript bias turned out to be too costly a constraint
however.

Important resources are generated by non-JavaScript tools -- images
processed by ImageMagick is one common example and pages produced by
more powerful templating languages than JavaScript provides (like
Jinja2) is another. Of course, we can write JavaScript wrappers around
these, but compared with a different, more language agnostic approach,
this is too costly.

Instead, Knit's successor Knot takes an approach based around defining
resources with scripts executed by the shell (written in bash, python,
node, ruby, or even a compiled binary). This makes it easy to generate
resources with any language or command-line tool. Knot therefore had a
choice of implementation langauges and Haskell was chosen for its
expressivity and type-safety. More details on this approach will be
given when Knot is published.

CB
